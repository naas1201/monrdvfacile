<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title data-fr="MonRdvFacile - Vos Événements Simplement" data-en="MyEasyMeeting - Your Events Made Simple">MonRdvFacile - Vos Événements Simplement</title>
    <meta name="description" content="Créez, gérez et trouvez des événements facilement avec MonRdvFacile. Organisation simplifiée pour tous vos rassemblements à Royan et Charente-Maritime (17).">
    <meta name="keywords" content="événements, royan, 17000, charente-maritime, gestion d'événements, inscription en ligne, organisation facile, mon rdv facile, evenementiel royan, créer événement, trouver événement">
    <meta name="author" content="MonRdvFacile">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.monrdvfacile.lpp.ovh/">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.monrdvfacile.lpp.ovh/">
    <meta property="og:title" content="MonRdvFacile - Événements à Royan et Alentours">
    <meta property="og:description" content="Créez, gérez et participez à des événements facilement. Idéal pour associations et rassemblements à Royan (17000).">
    <meta property="og:locale" content="fr_FR">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://www.monrdvfacile.lpp.ovh/">
    <meta name="twitter:title" content="MonRdvFacile - Simplifiez vos Événements">
    <meta name="twitter:description" content="Organisation d'événements simplifiée à Royan et Charente-Maritime (17).">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K2JVSXZXNN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-K2JVSXZXNN');
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Inline CSS for index.html --- */
        /* --- 1. Global Resets & Base --- */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { font-size: 16px; scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.65; background-color: #f4f7f6; /* Softer off-white */
            color: #333; display: flex; flex-direction: column; min-height: 100vh;
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
        }

        /* --- 2. Typography --- */
        h1, h2, h3, h4, h5, h6 { font-weight: 600; color: #2c3e50; /* Darker, sophisticated blue-grey */ margin-bottom: 0.85rem; line-height: 1.3; }
        h1 { font-size: 2.5rem; margin-top: 1rem; } /* Slightly larger H1 */
        h2 { font-size: 1.85rem; }
        p { margin-bottom: 1.1rem; color: #555; }
        a { color: #3498db; /* Brighter, modern blue for links */ text-decoration: none; transition: color 0.2s ease-in-out, opacity 0.2s ease-in-out; }
        a:hover, a:focus { color: #2980b9; /* Darker shade of blue */ opacity: 0.85; }

        /* --- 3. Layout & Container --- */
        .container { width: 90%; max-width: 1280px; /* Slightly wider max-width */ margin-left: auto; margin-right: auto; padding: 25px 20px; }
        main.container { flex-grow: 1; }
        .main-title-page {
            text-align: center; margin-bottom: 2.5rem; color: #1a2530;
            font-size: 2.8rem; font-weight: 700;
        }

        /* --- 4. Language Toggle --- */
        .lang-toggle { text-align: right; margin-bottom: 1rem; font-size: 0.9rem; position: absolute; top: 15px; right: 20px; z-index: 1001;}
        .lang-link { color: #555; text-decoration: none; padding: 0.3rem 0.5rem; border-radius: 4px; font-weight: 500; }
        .lang-link.active { font-weight: 700; color: #3498db; background-color: rgba(52, 152, 219, 0.1); }
        .lang-link:hover { background-color: rgba(52, 152, 219, 0.05); text-decoration: none; }

        /* --- 5. Header & Footer Placeholders (from hf.js) --- */
        /* Basic styles for #app-header and #app-footer should be in hf.js or its associated CSS if it had one.
           For self-containment, if hf.js doesn't style them, add basic structure here.
           Assuming hf.js provides its own styling for the elements it injects. */
        #app-header { background-color: #ffffff; color: #333; box-shadow: 0 2px 5px rgba(0,0,0,0.08); position: sticky; top: 0; z-index: 1000; }
        #app-footer { background-color: #2c3e50; color: #ecf0f1; padding: 2.5rem 0; text-align: center; font-size: 0.9rem; }
        #app-footer a { color: #bdc3c7; }
        #app-footer a:hover { color: #ffffff; }

        /* --- 6. Hero Section & CTAs --- */
        .hero-section {
            text-align: center; padding: 50px 20px; background-color: #ffffff;
            border-radius: 12px; margin-bottom: 40px; box-shadow: 0 8px 25px rgba(44, 62, 80, 0.1);
        }
        .hero-section h1 {
            font-size: 2.8rem; color: #2c3e50; margin-bottom: 1rem;
            font-weight: 700;
            background: -webkit-linear-gradient(45deg, #3498db, #8e44ad); /* Gradient text */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-section .subtitle { font-size: 1.25rem; color: #7f8c8d; margin-bottom: 2.5rem; max-width: 700px; margin-left: auto; margin-right: auto; }
        .cta-buttons { display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap; }
        .btn {
            display: inline-block; font-weight: 600; text-align: center; vertical-align: middle;
            cursor: pointer; user-select: none; border: 1px solid transparent;
            padding: 0.85rem 2rem; font-size: 1.05rem; line-height: 1.5; border-radius: 8px; /* Softer radius */
            transition: all 0.25s ease-in-out; letter-spacing: 0.5px;
        }
        .btn-primary-cta {
            background-color: #3498db; color: #ffffff; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        .btn-primary-cta:hover { background-color: #2980b9; transform: translateY(-3px); box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4); }
        .btn-secondary-cta {
            background-color: transparent; color: #3498db; border: 2px solid #3498db;
        }
        .btn-secondary-cta:hover { background-color: rgba(52, 152, 219, 0.1); color: #2980b9; }
        .modify-event-link { display: block; margin-top: 20px; color: #7f8c8d; font-size: 0.9rem; }
        .modify-event-link:hover { color: #3498db; }

        /* --- 7. Search and Filter Bar --- */
        .filter-section {
            background-color: #ffffff; padding: 25px; border-radius: 12px;
            margin-bottom: 30px; box-shadow: 0 6px 20px rgba(44, 62, 80, 0.08);
            display: flex; flex-wrap: wrap; gap: 20px; align-items: center;
        }
        .filter-section .form-group { flex: 1 1 200px; margin-bottom: 0; }
        .filter-section label { display: block; font-weight: 500; color: #555; margin-bottom: 0.4rem; font-size: 0.9rem; }
        .filter-section input[type="text"], .filter-section input[type="date"], .filter-section select {
            width: 100%; padding: 0.65rem 0.9rem; font-size: 0.95rem;
            border: 1px solid #dce4ec; border-radius: 6px;
            background-color: #fdfdfd;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .filter-section input[type="text"]:focus, .filter-section input[type="date"]:focus, .filter-section select:focus {
            border-color: #3498db; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.15); outline: none;
        }
        .filter-section .btn-filter {
            padding: 0.65rem 1.5rem; font-size: 0.95rem; background-color: #95a5a6; color: white;
            flex-shrink: 0; /* Prevent button from shrinking too much */
        }
        .filter-section .btn-filter:hover { background-color: #7f8c8d; }


        /* --- 8. Event Grid / "Carousel" --- */
        .event-grid-container { margin-top: 20px; }
        .event-grid-title { font-size: 1.7rem; color: #2c3e50; margin-bottom: 1.5rem; text-align: center; }
        #eventGrid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive columns */
            gap: 25px;
        }
        .event-card {
            background-color: #ffffff; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.07);
            display: flex; flex-direction: column;
            overflow: hidden; /* Ensures content respects border-radius */
            transition: transform 0.25s ease-out, box-shadow 0.25s ease-out;
            min-height: 380px; /* Ensure same height */
            position: relative; /* For absolute positioned elements like badges */
        }
        .event-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 25px rgba(44, 62, 80, 0.12);
        }
        .event-card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .event-card-title { font-size: 1.35rem; color: #34495e; margin-bottom: 0.5rem; line-height: 1.3; }
        .event-card-date { font-size: 0.9rem; color: #7f8c8d; margin-bottom: 0.8rem; display: flex; align-items: center; }
        .event-card-date i { margin-right: 8px; color: #3498db; }
        .event-card-description {
            font-size: 0.95rem; color: #555; margin-bottom: 1rem;
            flex-grow: 1;
            overflow: hidden; display: -webkit-box;
            -webkit-line-clamp: 3; /* Limit to 3 lines */
            -webkit-box-orient: vertical;
            max-height: calc(1.65 * 0.95rem * 3); /* line-height * font-size * lines */
        }
        .event-card-footer {
            padding: 15px 20px; border-top: 1px solid #eef2f5;
            margin-top: auto; /* Pushes footer to bottom */
        }
        .event-card-link {
            display: block; background-color: #3498db; color: #ffffff;
            padding: 10px 15px; border-radius: 6px; text-align: center;
            font-weight: 500; text-decoration: none;
            transition: background-color 0.2s ease;
        }
        .event-card-link:hover { background-color: #2980b9; text-decoration: none; color: #fff; }
        .event-card-link i { margin-left: 8px; }

        /* Event Badges */
        .event-badges { display: flex; gap: 8px; margin-bottom: 10px; position: absolute; top: 15px; right: 15px; }
        .badge {
            padding: 0.35em 0.7em; font-size: 0.75rem; font-weight: 600;
            border-radius: 15px; /* Pill shape */
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .badge-new { color: #fff; background-color: #2ecc71; /* Emerald green */ }
        .badge-paid { color: #fff; background-color: #e74c3c; /* Alizarin red */ }
        .badge-popular { color: #fff; background-color: #f39c12; /* Orange */ }
        .badge-special { color: #fff; background-color: #8e44ad; /* Wisteria purple */ }

        /* No Events Message */
        #noEventsMessage {
            text-align: center; padding: 40px 20px; background-color: #fff;
            border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            color: #7f8c8d; font-size: 1.1rem;
        }
        #noEventsMessage i { font-size: 2rem; display: block; margin-bottom: 1rem; color: #bdc3c7; }


        /* --- 9. Responsive --- */
        @media (max-width: 992px) {
            .hero-section h1 { font-size: 2.4rem; }
            .hero-section .subtitle { font-size: 1.1rem; }
            .event-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
        }
        @media (max-width: 768px) {
            html { font-size: 15px; }
            .main-title-page { font-size: 2.2rem; margin-bottom: 2rem; }
            .hero-section { padding: 30px 15px; }
            .hero-section h1 { font-size: 2rem; }
            .cta-buttons { flex-direction: column; gap: 15px; }
            .btn { width: 100%; max-width: 320px; }
            .filter-section { flex-direction: column; align-items: stretch; }
            .filter-section .form-group { width: 100%; }
            .filter-section .btn-filter { width: 100%; margin-top: 10px; }
            .event-grid { grid-template-columns: 1fr; /* Stack cards */ }
            .event-card { min-height: auto; /* Allow height to adjust */ }
            .lang-toggle { position: static; text-align: center; margin-bottom: 1.5rem; }
        }
        @media (max-width: 480px) {
            .hero-section h1 { font-size: 1.8rem; }
            .hero-section .subtitle { font-size: 1rem; }
            .event-card-title { font-size: 1.2rem; }
            .event-card-description { -webkit-line-clamp: 2; max-height: calc(1.65 * 0.95rem * 2); }
        }
    </style>
</head>
<body>

    <div id="app-header">
        </div>

    <main class="container">
        <div class="lang-toggle">
            <a href="#" onclick="inlineIndexChangeLang('fr'); return false;" class="lang-link active" id="lang-fr-idx">FR</a> |
            <a href="#" onclick="inlineIndexChangeLang('en'); return false;" class="lang-link" id="lang-en-idx">EN</a>
        </div>

        <section class="hero-section">
            <h1 data-fr="Organisez et Trouvez Vos Événements Facilement" data-en="Organize and Find Your Events Easily">Organisez et Trouvez Vos Événements Facilement</h1>
            <p class="subtitle" data-fr="MonRdvFacile est votre plateforme unique pour créer des événements mémorables et découvrir les rassemblements passionnants près de chez vous à Royan et ses environs." data-en="MyEasyMeeting is your one-stop platform to create memorable events and discover exciting gatherings near you in Royan and its surroundings.">MonRdvFacile est votre plateforme unique pour créer des événements mémorables et découvrir les rassemblements passionnants près de chez vous à Royan et ses environs.</p>
            <div class="cta-buttons">
                <a href="create-event.html" class="btn btn-primary-cta" data-fr="Créer un Événement" data-en="Create an Event"><i class="fas fa-plus-circle"></i> Créer un Événement</a>
            </div>
            <a href="edit-event.html" class="modify-event-link" data-fr="Modifier un événement existant" data-en="Edit an existing event"><i class="fas fa-edit"></i> Modifier un événement existant</a>
        </section>

        <section class="filter-section">
            <div class="form-group">
                <label for="searchName" data-fr="Rechercher par nom :" data-en="Search by name:">Rechercher par nom :</label>
                <input type="text" id="searchName" placeholder-fr="Nom de l'événement..." placeholder-en="Event name...">
            </div>
            <div class="form-group">
                <label for="searchDate" data-fr="Filtrer par date (à partir de) :" data-en="Filter by date (from):">Filtrer par date (à partir de) :</label>
                <input type="date" id="searchDate">
            </div>
            <button type="button" id="resetFiltersButton" class="btn btn-filter" data-fr="Réinitialiser" data-en="Reset"><i class="fas fa-undo"></i> <span data-fr="Réinitialiser" data-en="Reset">Réinitialiser</span></button>
        </section>

        <section class="event-grid-container">
            <h2 class="event-grid-title" data-fr="Événements à Venir" data-en="Upcoming Events">Événements à Venir</h2>
            <div id="eventGrid">
                </div>
            <div id="noEventsMessage" style="display: none;">
                <i class="fas fa-calendar-times"></i>
                <p data-fr="Aucun événement trouvé pour le moment ou correspondant à vos critères." data-en="No events found at the moment or matching your criteria.">Aucun événement trouvé pour le moment ou correspondant à vos critères.</p>
            </div>
        </section>

    </main>

    <div id="app-footer">
        </div>

    <script src="src/hf.js"></script>
    <script>
    // --- MonRdvFacile - Inline JS for revamped index.html ---
    document.addEventListener('DOMContentLoaded', function() {
        let currentLangIdx = 'fr';
        const translatableElementsIdx = [];

        function queryTranslatableElementsIdx() {
            translatableElementsIdx.length = 0;
            document.querySelectorAll('[data-fr], [data-en], [placeholder-fr], [placeholder-en]').forEach(el => {
                translatableElementsIdx.push({
                    element: el,
                    frText: el.dataset.fr || el.textContent || el.value,
                    enText: el.dataset.en || el.textContent || el.value,
                    frPlaceholder: el.getAttribute('placeholder-fr'),
                    enPlaceholder: el.getAttribute('placeholder-en'),
                    isButtonValue: (el.tagName === 'INPUT' && (el.type === 'submit' || el.type === 'button')) || el.tagName === 'BUTTON',
                    isPlaceholder: el.hasAttribute('placeholder-fr') || el.hasAttribute('placeholder-en')
                });
            });
        }

        function updateTextForLanguageIdx(lang) {
            currentLangIdx = lang;
            document.documentElement.lang = lang;
            translatableElementsIdx.forEach(item => {
                if (item.isPlaceholder) {
                    item.element.placeholder = lang === 'fr' ? item.frPlaceholder : item.enPlaceholder;
                } else if (item.isButtonValue && item.element.querySelector('span')) { // Handle buttons with text in span
                    const span = item.element.querySelector('span');
                     if(span) span.textContent = lang === 'fr' ? item.frText : item.enText;
                } else if (item.isButtonValue) {
                     item.element.textContent = lang === 'fr' ? item.frText : item.enText; // For buttons without span
                }
                else {
                    item.element.textContent = lang === 'fr' ? item.frText : item.enText;
                }
            });
            document.querySelectorAll('.lang-link').forEach(link => link.classList.remove('active'));
            const activeLink = document.getElementById(`lang-${lang}-idx`);
            if (activeLink) activeLink.classList.add('active');
            try { localStorage.setItem('preferredLang', lang); } catch (e) { console.warn("localStorage unavailable for lang pref."); }
            
            // Re-render events if language changes as some text might be in JS
            loadAndDisplayEvents();
        }

        window.inlineIndexChangeLang = function(lang) {
            if (lang !== currentLangIdx) {
                updateTextForLanguageIdx(lang);
            }
            return false;
        };

        function detectLanguagePreferenceIdx() {
            try {
                const storedLang = localStorage.getItem('preferredLang');
                if (storedLang && (storedLang === 'fr' || storedLang === 'en')) return storedLang;
            } catch (e) { /* ignore */ }
            return 'fr';
        }

        const eventGrid = document.getElementById('eventGrid');
        const noEventsMessage = document.getElementById('noEventsMessage');
        const searchNameInput = document.getElementById('searchName');
        const searchDateInput = document.getElementById('searchDate');
        const resetFiltersButton = document.getElementById('resetFiltersButton');

        function formatEventDate(dateStr, timeStr, lang) {
            const date = new Date(`${dateStr}T${timeStr || '00:00:00'}`);
            if (isNaN(date)) return dateStr; // fallback
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            return date.toLocaleDateString(lang === 'fr' ? 'fr-FR' : 'en-US', options);
        }
        
        function getBadgeHTML(badgeKey, lang) {
            if (!badgeKey || badgeKey === "none") return "";
            const badges = {
                new: { fr: "Nouveau", en: "New", class: "badge-new" },
                popular: { fr: "Populaire", en: "Popular", class: "badge-popular" },
                special: { fr: "Spécial", en: "Special", class: "badge-special" },
                paid: { fr: "Payant", en: "Paid", class: "badge-paid"} // Added for consistency if isPaidEvent is true
            };
            const badgeInfo = badges[badgeKey];
            if (!badgeInfo) return "";
            return `<span class="badge ${badgeInfo.class}">${lang === 'fr' ? badgeInfo.fr : badgeInfo.en}</span>`;
        }


        function renderEventCard(eventData) {
            const card = document.createElement('div');
            card.classList.add('event-card');

            let badgesHTML = getBadgeHTML(eventData.eventBadge, currentLangIdx);
            if (eventData.isPaidEvent === 'on' || eventData.isPaidEvent === true) {
                 badgesHTML += getBadgeHTML('paid', currentLangIdx);
            }


            const description = eventData.eventDescription || (currentLangIdx === 'fr' ? 'Pas de description.' : 'No description.');
            const title = eventData.eventName || (currentLangIdx === 'fr' ? 'Événement Sans Titre' : 'Untitled Event');
            
            const startDateFormatted = formatEventDate(eventData.eventStartDate, eventData.eventStartTime, currentLangIdx);
            const endDateFormatted = formatEventDate(eventData.eventEndDate, eventData.eventEndTime, currentLangIdx);
            const dateDisplay = currentLangIdx === 'fr' ? `Du ${startDateFormatted} au ${endDateFormatted}` : `From ${startDateFormatted} to ${endDateFormatted}`;


            card.innerHTML = `
                ${badgesHTML ? `<div class="event-badges">${badgesHTML}</div>` : ''}
                <div class="event-card-content">
                    <h3 class="event-card-title">${title}</h3>
                    <p class="event-card-date"><i class="fas fa-calendar-alt"></i> ${dateDisplay}</p>
                    <p class="event-card-description">${description}</p>
                </div>
                <div class="event-card-footer">
                    <a href="event-detail-placeholder.html?id=${eventData.id}" class="event-card-link">
                        ${currentLangIdx === 'fr' ? 'Voir les détails' : 'View Details'} <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            `;
            // Make the whole card clickable, not just the link for better UX
            card.addEventListener('click', () => {
                window.location.href = `event-detail-placeholder.html?id=${eventData.id}`;
            });
            return card;
        }

        function loadAndDisplayEvents() {
            eventGrid.innerHTML = ''; // Clear existing events
            let allEvents = [];
            try {
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith('event-')) {
                        const eventData = JSON.parse(localStorage.getItem(key));
                        if (eventData && eventData.id) { // Basic check
                            allEvents.push(eventData);
                        }
                    }
                }
            } catch (e) {
                console.error("Error loading events from localStorage:", e);
                noEventsMessage.textContent = currentLangIdx === 'fr' ? "Erreur lors du chargement des événements." : "Error loading events.";
                noEventsMessage.style.display = 'block';
                return;
            }

            // Filter events
            const searchTerm = searchNameInput.value.toLowerCase();
            const searchDate = searchDateInput.value;

            const filteredEvents = allEvents.filter(event => {
                const eventNameMatch = event.eventName && event.eventName.toLowerCase().includes(searchTerm);
                let eventDateMatch = true;
                if (searchDate) {
                    // Compare eventStartDate with searchDate. Event is valid if it starts on or after searchDate.
                    eventDateMatch = event.eventStartDate && event.eventStartDate >= searchDate;
                }
                return eventNameMatch && eventDateMatch;
            });

            // Sort events: closest to happen first. Past events can be shown last or filtered out.
            // For now, all events are shown, sorted by start date.
            filteredEvents.sort((a, b) => {
                const dateA = new Date(`${a.eventStartDate}T${a.eventStartTime || '00:00'}`);
                const dateB = new Date(`${b.eventStartDate}T${b.eventStartTime || '00:00'}`);
                return dateA - dateB; // Ascending order
            });

            if (filteredEvents.length > 0) {
                filteredEvents.forEach(eventData => {
                    eventGrid.appendChild(renderEventCard(eventData));
                });
                noEventsMessage.style.display = 'none';
            } else {
                noEventsMessage.style.display = 'block';
                const noEventsText = document.querySelector('#noEventsMessage p');
                if (noEventsText) {
                    noEventsText.textContent = currentLangIdx === 'fr' ? "Aucun événement trouvé pour le moment ou correspondant à vos critères." : "No events found at the moment or matching your criteria.";
                }
            }
        }

        // Event listeners for filters
        searchNameInput.addEventListener('input', loadAndDisplayEvents);
        searchDateInput.addEventListener('change', loadAndDisplayEvents);
        resetFiltersButton.addEventListener('click', () => {
            searchNameInput.value = '';
            searchDateInput.value = '';
            loadAndDisplayEvents();
        });

        // Initial setup
        queryTranslatableElementsIdx();
        const preferredLangIdx = detectLanguagePreferenceIdx();
        updateTextForLanguageIdx(preferredLangIdx); // This will also call loadAndDisplayEvents

        // Ensure hf.js loaded header/footer are also translated
        // This is a bit of a hack; ideally, hf.js would handle its own language updates
        // or expose a function to be called.
        setTimeout(() => {
            if (typeof window.updateHeaderFooterLanguage === "function") {
                 window.updateHeaderFooterLanguage(currentLangIdx);
            } else if (typeof window.updateTextForLanguage === "function" && window.updateTextForLanguage !== updateTextForLanguageIdx) {
                // If main.js's global function exists and is different
                window.updateTextForLanguage(currentLangIdx);
            }
            // Re-query elements after hf.js might have added some
            queryTranslatableElementsIdx();
            updateTextForLanguageIdx(currentLangIdx); // Re-apply to ensure all elements are covered
        }, 200); // Delay to allow hf.js to potentially load

        console.log("Revamped index.html inline JS loaded.");
    });
    </script>
</body>
</html>
